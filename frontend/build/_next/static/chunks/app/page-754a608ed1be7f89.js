(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1167:function(e,n,t){Promise.resolve().then(t.bind(t,83))},83:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return r}});var E=t(7437),a=t(2265);function l(){return(0,E.jsx)("nav",{className:"",children:(0,E.jsxs)("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4",children:[(0,E.jsx)("a",{href:"/",className:"btn-ghost btn flex items-center space-x-3 rtl:space-x-reverse",children:(0,E.jsx)("span",{className:"self-center text-xl font-semibold whitespace-nowrap",children:"VeriEQL"})}),(0,E.jsxs)("button",{"data-collapse-toggle":"navbar-default",type:"button",className:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-default","aria-expanded":"false",children:[(0,E.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,E.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",children:(0,E.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h15M1 7h15M1 13h15"})})]}),(0,E.jsx)("div",{className:"hidden w-full md:block md:w-auto",id:"navbar-default",children:(0,E.jsxs)("ul",{className:"font-medium flex flex-col p-4 md:p-0 mt-4 border rounded-lg md:flex-row md:space-x-6 rtl:space-x-reverse md:mt-0 md:border-0",children:[(0,E.jsx)("li",{children:(0,E.jsx)("a",{href:"/",className:"btn-ghost btn flex bg-gray-200 items-center space-x-3 rtl:space-x-reverse",children:"Home"})}),(0,E.jsx)("li",{children:(0,E.jsx)("a",{href:"/",className:"btn-ghost btn flex items-center space-x-3 rtl:space-x-reverse",children:"About"})})]})})]})})}function r(){let[e,n]=(0,a.useState)(""),[t,r]=(0,a.useState)(""),[s,i]=(0,a.useState)(2),[c,o]=(0,a.useState)(""),[d,N]=(0,a.useState)(""),[T,u]=(0,a.useState)("Generic"),[R,S]=(0,a.useState)(!1),O=e=>{u(e),S(!1)};return(0,E.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-between p-14",children:(0,E.jsxs)("div",{className:"mb-32 text-center lg:max-w-7xl lg:w-full lg:mb-0 lg:grid-cols-4 lg:text-left",children:[(0,E.jsx)(l,{}),(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,E.jsx)("div",{className:"grid grid-rows-1 gap-4",children:(0,E.jsxs)("div",{className:"space-y-2 rounded-md border-2 border-dashed border-gray-800 p-2",children:[(0,E.jsx)("div",{className:"font-extrabold text-xl",children:"Queries"}),(0,E.jsx)("label",{htmlFor:"query-1",className:"block mb-2 text-sm font-medium text-gray-900",children:"Query 1"}),(0,E.jsx)("textarea",{id:"query-1",rows:5,className:"textarea textarea-secondary resize-y w-full textarea-bordered",value:e,onChange:e=>n(e.target.value)}),(0,E.jsx)("label",{htmlFor:"query-2",className:"block mb-2 text-sm font-medium text-gray-900",children:"Query 2"}),(0,E.jsx)("textarea",{id:"query-2",rows:5,value:t,onChange:e=>r(e.target.value),className:"textarea textarea-secondary resize-y w-full textarea-bordered"}),"Bound = ",(0,E.jsx)("input",{id:"bound",type:"number",placeholder:"2",value:s,onChange:e=>i(e.target.value),className:"input input-bordered input-s w-16"}),(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)("button",{className:"btn btn-accent",onClick:()=>(function(){try{let n={query1:e,query2:t,bound:parseInt(s.toString()),schema:JSON.parse(c.toString()),constraints:""===d.toString()?[]:JSON.parse(d.toString()),dialect:T};d instanceof Object||(n={query1:e,query2:t,bound:parseInt(s.toString()),schema:JSON.parse(c.toString()),constraints:""===d.toString()?[]:JSON.parse(d.replaceAll(".","__").toString()),dialect:T}),fetch("http://127.0.0.1:8000/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{let n=document.getElementById("decision"),t=document.getElementById("counterexample"),E="";switch(e.decision){case"EQU":E='<span class="text-green-600">Equivalent</span>',t.innerHTML="";break;case"NEQ":E='<span class="text-red-600">Non-equivalent</span>';break;case"TMO":E='<span class="accent-gray-600">Timeout</span>',t.innerHTML="";break;default:E='<span class="accent-gray-600">Unsupported</span>',t.innerHTML=""}if(n.innerHTML=E,"NEQ"===e.decision){let n='<div class="flex space-x-2">\n                    <div class="font-extrabold text-xl">\n                        Counterexample\n                    </div>\n                </div>';for(let[t,E]of Object.entries(e.counterexample))n+=function(e,n){let t='<div class="mt-2 text-sm leading-5 font-bold">'.concat(e,"</div>");for(let[e]of(t+='<div class="flex space-x-2"> <div class="overflow-x-auto"><table class="table"><thead><tr>',Object.entries(n[0])))t+='<th class="bg-base-200 lg:py-3">'.concat(e,"</th>");return t+="</tr></thead> <tbody>",n.forEach(e=>{for(let[,n]of(t+="<tr>",Object.entries(e)))t+="<td>".concat(n,"</td>");t+="</tr>"}),t+="</tbody></table></div></div>"}(t,E);n+='\n                    <div class="collapse bg-base-200 mt-4">\n                      <input type="checkbox" />\n                      <div class="collapse-title font-medium">Show Counterexample SQL Code</div>\n                      <div class="collapse-content">\n                      <button class="btn btn-outline btn-sm mb-2" onclick="navigator.clipboard.writeText(`'.concat(e.counterexample_sql,'`);alert(\'Copied to the clipboard\');">\n                        Copy Code\n                      </button>\n                      <pre class="whitespace-pre-wrap text-xs">').concat(e.counterexample_sql,"</pre>\n                      </div>\n                    </div>\n                    "),t.innerHTML=n}("NEQ"===e.decision||"EQU"===e.decision)&&(t.innerHTML+='\n                    <div class="collapse bg-base-200 mt-4">\n                      <input type="checkbox" />\n                      <div class="collapse-title font-medium">Show SMT Formula</div>\n                      <div class="collapse-content">\n                      <pre class="whitespace-pre-wrap text-xs">'.concat(e.pysmt_formula,"</pre>\n                      </div>\n                    </div>\n                    "))})}catch(t){let e=document.getElementById("decision"),n=document.getElementById("counterexample");e.innerHTML="",n.innerHTML="",alert("Schema format incorrect")}})(),children:"Verify"}),(0,E.jsxs)("div",{className:"dropdown p-2",children:[(0,E.jsxs)("div",{tabIndex:0,role:"button",className:"btn",onClick:()=>S(!R),children:["Dialect: ",T]}),R&&(0,E.jsxs)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:[(0,E.jsx)("li",{children:(0,E.jsx)("a",{onClick:()=>O("Generic"),children:"Generic"})}),(0,E.jsx)("li",{children:(0,E.jsx)("a",{onClick:()=>O("MySQL"),children:"MySQL"})}),(0,E.jsx)("li",{children:(0,E.jsx)("a",{onClick:()=>O("PostgreSQL"),children:"PostgreSQL"})}),(0,E.jsx)("li",{children:(0,E.jsx)("a",{onClick:()=>O("MariaDB"),children:"MariaDB"})}),(0,E.jsx)("li",{children:(0,E.jsx)("a",{onClick:()=>O("Oracle"),children:"Oracle"})})]})]})]})]})}),(0,E.jsxs)("div",{className:"grid grid-rows-1 gap-4",children:[(0,E.jsxs)("div",{className:"space-y-2 rounded-md border-2 border-dashed border-gray-800 p-2",children:[(0,E.jsx)("div",{className:"font-extrabold text-xl",children:"Schema"}),(0,E.jsx)("div",{className:"font-bold",children:"Tables Definition"}),(0,E.jsx)("textarea",{id:"schema",rows:5,value:c.toString(),onChange:e=>o(e.target.value),className:"textarea textarea-secondary resize-y w-full textarea-bordered"}),(0,E.jsx)("div",{className:"font-bold",children:"Integrity Constraints"}),(0,E.jsx)("textarea",{id:"constraints",rows:5,value:d.toString(),onChange:e=>N(e.target.value),className:"textarea textarea-secondary resize-y w-full textarea-bordered"})]}),(0,E.jsxs)("div",{className:"space-y-2 rounded-md border-2 border-dashed border-gray-800 p-2",children:[(0,E.jsx)("div",{className:"font-extrabold text-xl",children:"Result"}),(0,E.jsx)("div",{className:"flex space-x-2",children:(0,E.jsx)("div",{id:"decision",className:"mt-2 leading-5 font-bold"})}),(0,E.jsx)("div",{id:"counterexample"})]})]})]}),(0,E.jsxs)("div",{className:"flex gap-2 p-2",children:[(0,E.jsx)("div",{className:"text-left pt-2",children:(0,E.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT ROUND((SUM(ORDER_DATE = CUSTOMER_PREF_DELIVERY_DATE) / COUNT(*)) * 100 , 2) AS IMMEDIATE_PERCENTAGE FROM DELIVERY"),r("SELECT ROUND(SUM(IF(ORDER_DATE = CUSTOMER_PREF_DELIVERY_DATE, 1,0 ))/COUNT(DELIVERY_ID) *100,2) AS IMMEDIATE_PERCENTAGE FROM DELIVERY"),i(2),o('{\n    "DELIVERY": {\n        "DELIVERY_ID": "INT",\n        "CUSTOMER_ID": "INT",\n        "ORDER_DATE": "DATE",\n        "CUSTOMER_PREF_DELIVERY_DATE": "DATE"\n    }\n}'),N('[\n    {"primary": [{"value": "DELIVERY.DELIVERY_ID"}]}\n]')})(),children:"Figure 1 Example"})}),(0,E.jsx)("div",{className:"text-left pt-2",children:(0,E.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT DEPTNO, COUNT(*) FILTER (WHERE JOB = 'CLERK') FROM (SELECT * FROM EMP WHERE DEPTNO = 10 UNION ALL SELECT * FROM EMP WHERE DEPTNO > 20) AS t3 GROUP BY DEPTNO"),r("SELECT DEPTNO, COALESCE(SUM(EXPR$1), 0) FROM (SELECT DEPTNO, COUNT(*) FILTER (WHERE JOB = 'CLERK') AS EXPR$1 FROM EMP WHERE DEPTNO = 10 GROUP BY DEPTNO UNION ALL SELECT DEPTNO, COUNT(*) FILTER (WHERE JOB = 'CLERK') AS EXPR$1 FROM EMP WHERE DEPTNO > 20 GROUP BY DEPTNO) AS t12 GROUP BY DEPTNO"),i(2),o('{"EMP": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR", "MGR": "INT",\n                          "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT", "SLACKER": "BOOLEAN"},\n                  "DEPT": {"DEPTNO": "INT", "NAME": "VARCHAR"},\n                  "BONUS": {"ENAME": "VARCHAR", "JOB": "VARCHAR", "SAL": "INT", "COMM": "INT"},\n                  "EMPNULLABLES": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR", "MGR": "INT",\n                                   "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT", "SLACKER": "BOOLEAN"},\n                  "EMPNULLABLES_20": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR",\n                                      "MGR": "INT", "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT",\n                                      "SLACKER": "BOOLEAN"},\n                  "EMP_B": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR", "MGR": "INT",\n                            "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT", "SLACKER": "BOOLEAN", "BIRTHDATE": "DATE"}}'),N('[{"primary": [{"value": "EMP.EMPNO"}]},\n                       {"foreign": [{"value": "EMP.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"primary": [{"value": "DEPT.DEPTNO"}]}, {"primary": [{"value": "EMPNULLABLES.EMPNO"}]},\n                       {"foreign": [{"value": "EMPNULLABLES.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"primary": [{"value": "EMPNULLABLES_20.EMPNO"}]},\n                       {"foreign": [{"value": "EMPNULLABLES_20.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"primary": [{"value": "EMP_B.EMPNO"}]},\n                       {"foreign": [{"value": "EMP_B.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"not_null": {"value": "EMP.EMPNO"}}, {"not_null": {"value": "EMP.ENAME"}},\n                       {"not_null": {"value": "EMP.JOB"}}, {"not_null": {"value": "EMP.HIREDATE"}},\n                       {"not_null": {"value": "EMP.SAL"}}, {"not_null": {"value": "EMP.COMM"}},\n                       {"not_null": {"value": "EMP.DEPTNO"}}, {"not_null": {"value": "EMP.SLACKER"}},\n                       {"not_null": {"value": "DEPT.DEPTNO"}}, {"not_null": {"value": "DEPT.NAME"}},\n                       {"not_null": {"value": "BONUS.ENAME"}}, {"not_null": {"value": "BONUS.JOB"}},\n                       {"not_null": {"value": "BONUS.SAL"}}, {"not_null": {"value": "BONUS.COMM"}},\n                       {"not_null": {"value": "EMP_B.EMPNO"}}, {"not_null": {"value": "EMP_B.ENAME"}},\n                       {"not_null": {"value": "EMP_B.JOB"}}, {"not_null": {"value": "EMP_B.HIREDATE"}},\n                       {"not_null": {"value": "EMP_B.SAL"}}, {"not_null": {"value": "EMP_B.COMM"}},\n                       {"not_null": {"value": "EMP_B.DEPTNO"}}, {"not_null": {"value": "EMP_B.SLACKER"}},\n                       {"not_null": {"value": "EMP_B.BIRTHDATE"}}]')})(),children:"Calcite Example"})}),(0,E.jsx)("div",{className:"text-left pt-2",children:(0,E.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("WITH TEMP AS (SELECT DISTINCT A.CUSTOMER_ID, B.CUSTOMER_NAME, SUM(CASE WHEN A.PRODUCT_NAME IN ('A', 'B') THEN 1 ELSE 0 END) AS AB, SUM(CASE WHEN A.PRODUCT_NAME = 'C' THEN 1 ELSE 0 END) AS C FROM ORDERS A JOIN CUSTOMERS B ON A.CUSTOMER_ID = B.CUSTOMER_ID GROUP BY A.CUSTOMER_ID) SELECT CUSTOMER_ID, CUSTOMER_NAME FROM TEMP WHERE AB >= 2 AND C = 0"),r("SELECT CUSTOMER_ID, CUSTOMER_NAME FROM CUSTOMERS WHERE CUSTOMER_ID IN (SELECT DISTINCT CUSTOMER_ID FROM ORDERS WHERE PRODUCT_NAME = 'A') AND CUSTOMER_ID IN (SELECT DISTINCT CUSTOMER_ID FROM ORDERS WHERE PRODUCT_NAME = 'B') AND CUSTOMER_ID NOT IN (SELECT DISTINCT CUSTOMER_ID FROM ORDERS WHERE PRODUCT_NAME = 'C') ORDER BY CUSTOMER_ID"),i(2),o('{\n  "CUSTOMERS": {"CUSTOMER_ID": "INT", "CUSTOMER_NAME": "VARCHAR"},\n  "ORDERS": {"ORDER_ID": "INT", "CUSTOMER_ID": "int", "PRODUCT_NAME": "VARCHAR"}\n}'),N('[\n  {"primary": [{"value": "CUSTOMERS.CUSTOMER_ID"}]},\n  {"primary": [{"value": "ORDERS.ORDER_ID"}]},\n  {"foreign": [{"value": "ORDERS.CUSTOMER_ID"}, {"value": "CUSTOMERS.CUSTOMER_ID"}]}\n]')})(),children:"LeetCode Example"})}),(0,E.jsx)("div",{className:"text-left pt-2",children:(0,E.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT DISTINCT PAGE_ID AS RECOMMENDED_PAGE FROM (SELECT CASE WHEN USER1_ID=1 THEN USER2_ID WHEN USER2_ID=1 THEN USER1_ID ELSE NULL END AS USER_ID FROM FRIENDSHIP) AS TB1 JOIN LIKES AS TB2 ON TB1.USER_ID=TB2.USER_ID WHERE PAGE_ID NOT IN (SELECT PAGE_ID FROM LIKES WHERE USER_ID=1)"),r("SELECT DISTINCT PAGE_ID AS RECOMMENDED_PAGE FROM ( SELECT B.USER_ID, B.PAGE_ID FROM FRIENDSHIP A LEFT JOIN LIKES B ON (A.USER2_ID=B.USER_ID OR A.USER1_ID=B.USER_ID) AND (A.USER1_ID=1 OR A.USER2_ID=1) WHERE B.PAGE_ID NOT IN ( SELECT DISTINCT(PAGE_ID) FROM LIKES WHERE USER_ID=1) ) T"),i(1),o('{\n  "FRIENDSHIP":{"USER1_ID":"INT","USER2_ID":"INT"},\n  "LIKES":{"USER_ID":"INT","PAGE_ID":"INT"}\n}'),N('[\n  {"primary":[{"value":"FRIENDSHIP.USER1_ID"},{"value":"FRIENDSHIP.USER2_ID"}]},\n  {"primary":[{"value":"LIKES.USER_ID"},{"value":"LIKES.PAGE_ID"}]},\n  {"neq":[{"value":"FRIENDSHIP.USER1_ID"},{"value":"FRIENDSHIP.USER2_ID"}]}\n]')})(),children:"MySQL Bug"})}),(0,E.jsx)("div",{className:"text-left pt-2",children:(0,E.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT PNUM FROM PARTS WHERE (PNUM, QOH) IN (SELECT P.PNUM, IF(ISNULL(CT), 0, CT) AS QOH FROM (SELECT PNUM FROM SUPPLY GROUP BY PNUM) P LEFT JOIN (SELECT PNUM, COUNT(SHIPDATE) AS CT FROM SUPPLY WHERE SHIPDATE < (DATE '1980-01-01') GROUP BY PNUM) Q ON P.PNUM=Q.PNUM);"),r("WITH TEMP(SUPPNUM, CT) AS (SELECT PNUM, COUNT(SHIPDATE) FROM SUPPLY WHERE SHIPDATE < (DATE '1980-01-01') GROUP BY PNUM) SELECT PNUM FROM PARTS, TEMP WHERE PARTS.QOH = TEMP.CT AND PARTS.PNUM = TEMP.SUPPNUM;"),i(1),o('{\n  "PARTS":{"PNUM":"INT","QOH":"INT"},\n  "SUPPLY":{"PNUM":"INT","QOH":"INT","SHIPDATE":"DATE"}\n}'),N("")})(),children:"COUNT Bug"})})]})]})})}},622:function(e,n,t){"use strict";var E=t(2265),a=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,n,t){var E,i={},c=null,o=null;for(E in void 0!==t&&(c=""+t),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(o=n.ref),n)l.call(n,E)&&!s.hasOwnProperty(E)&&(i[E]=n[E]);if(e&&e.defaultProps)for(E in n=e.defaultProps)void 0===i[E]&&(i[E]=n[E]);return{$$typeof:a,type:e,key:c,ref:o,props:i,_owner:r.current}}n.jsx=i,n.jsxs=i},7437:function(e,n,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=1167)}),_N_E=e.O()}]);