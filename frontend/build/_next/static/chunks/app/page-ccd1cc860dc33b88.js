(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7892:function(e,n,t){Promise.resolve().then(t.bind(t,83))},83:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var a=t(7437),l=t(2265);function r(){return(0,a.jsx)("nav",{className:"",children:(0,a.jsxs)("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4",children:[(0,a.jsx)("a",{href:"/",className:"btn-ghost btn flex items-center space-x-3 rtl:space-x-reverse",children:(0,a.jsx)("span",{className:"self-center text-xl font-semibold whitespace-nowrap",children:"VeriEQL"})}),(0,a.jsxs)("button",{"data-collapse-toggle":"navbar-default",type:"button",className:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-default","aria-expanded":"false",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,a.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h15M1 7h15M1 13h15"})})]}),(0,a.jsx)("div",{className:"hidden w-full md:block md:w-auto",id:"navbar-default",children:(0,a.jsxs)("ul",{className:"font-medium flex flex-col p-4 md:p-0 mt-4 border rounded-lg md:flex-row md:space-x-6 rtl:space-x-reverse md:mt-0 md:border-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:"btn-ghost btn flex bg-gray-200 items-center space-x-3 rtl:space-x-reverse",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:"btn-ghost btn flex items-center space-x-3 rtl:space-x-reverse",children:"About"})})]})})]})})}function s(){let[e,n]=(0,l.useState)(""),[t,s]=(0,l.useState)(""),[E,i]=(0,l.useState)(2),[c,o]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[N,T]=(0,l.useState)("Generic"),[x,m]=(0,l.useState)(!1),S=e=>{T(e),m(!1)};return(0,a.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-between p-14",children:(0,a.jsxs)("div",{className:"mb-32 text-center lg:max-w-7xl lg:w-full lg:mb-0 lg:grid-cols-4 lg:text-left",children:[(0,a.jsx)(r,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"grid grid-rows-1 gap-4",children:(0,a.jsxs)("div",{className:"space-y-2 rounded-md border-2 border-dashed border-gray-800 p-2",children:[(0,a.jsx)("div",{className:"font-extrabold text-xl",children:"Queries"}),(0,a.jsx)("label",{htmlFor:"query-1",className:"block mb-2 text-sm font-medium text-gray-900",children:"Query 1"}),(0,a.jsx)("textarea",{id:"query-1",rows:5,className:"textarea textarea-secondary resize-y w-full textarea-bordered",value:e,onChange:e=>n(e.target.value)}),(0,a.jsx)("label",{htmlFor:"query-2",className:"block mb-2 text-sm font-medium text-gray-900",children:"Query 2"}),(0,a.jsx)("textarea",{id:"query-2",rows:5,value:t,onChange:e=>s(e.target.value),className:"textarea textarea-secondary resize-y w-full textarea-bordered"}),"Bound = ",(0,a.jsx)("input",{id:"bound",type:"number",placeholder:"2",value:E,onChange:e=>i(e.target.value),className:"input input-bordered input-s w-16"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("button",{className:"btn btn-accent",onClick:()=>(function(){try{let n={query1:e,query2:t,bound:parseInt(E.toString()),schema:JSON.parse(c.toString()),constraints:""===d.toString()?[]:JSON.parse(d.toString()),dialect:N};d instanceof Object||(n={query1:e,query2:t,bound:parseInt(E.toString()),schema:JSON.parse(c.toString()),constraints:""===d.toString()?[]:JSON.parse(d.replaceAll(".","__").toString()),dialect:N}),fetch("http://127.0.0.1:8000/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{let n=document.getElementById("decision"),t=document.getElementById("counterexample"),a="";switch(e.decision){case"EQU":a='<span class="text-green-600">Equivalent</span>',t.innerHTML="";break;case"NEQ":a='<span class="text-red-600">Non-equivalent</span>';break;case"TMO":a='<span class="accent-gray-600">Timeout</span>',t.innerHTML="";break;default:a='<span class="accent-gray-600">Unsupported</span>',t.innerHTML=""}if(n.innerHTML=a,"NEQ"===e.decision){let n='<div class="flex space-x-2">\n                    <div class="font-extrabold text-xl">\n                        Counterexample\n                    </div>\n                </div>';for(let[t,a]of Object.entries(e.counterexample))n+=function(e,n){let t='<div class="mt-2 text-sm leading-5 font-bold">'.concat(e,"</div>");for(let[e]of(t+='<div class="flex space-x-2"> <div class="overflow-x-auto"><table class="table"><thead><tr>',Object.entries(n[0])))t+='<th class="bg-base-200 lg:py-3">'.concat(e,"</th>");return t+="</tr></thead> <tbody>",n.forEach(e=>{for(let[,n]of(t+="<tr>",Object.entries(e)))t+="<td>".concat(n,"</td>");t+="</tr>"}),t+="</tbody></table></div></div>"}(t,a);n+='\n                    <div class="collapse bg-base-200 mt-4">\n                      <input type="checkbox" />\n                      <div class="collapse-title font-medium">Show Counterexample SQL Code</div>\n                      <div class="collapse-content">\n                      <button class="btn btn-outline btn-sm mb-2" onclick="navigator.clipboard.writeText(`'.concat(e.counterexample_sql,'`);alert(\'Copied to the clipboard\');">\n                        Copy Code\n                      </button>\n                      <pre class="whitespace-pre-wrap text-xs">').concat(e.counterexample_sql,"</pre>\n                      </div>\n                    </div>\n                    "),t.innerHTML=n}("NEQ"===e.decision||"EQU"===e.decision)&&(t.innerHTML+='\n                    <div class="collapse bg-base-200 mt-4">\n                      <input type="checkbox" />\n                      <div class="collapse-title font-medium">Show SMT Formula</div>\n                      <div class="collapse-content">\n                      <pre class="whitespace-pre-wrap text-xs">'.concat(e.pysmt_formula,"</pre>\n                      </div>\n                    </div>\n                    "))})}catch(t){let e=document.getElementById("decision"),n=document.getElementById("counterexample");e.innerHTML="",n.innerHTML="",alert("Schema format incorrect")}})(),children:"Verify"}),(0,a.jsxs)("div",{className:"dropdown p-2",children:[(0,a.jsxs)("div",{tabIndex:0,role:"button",className:"btn",onClick:()=>m(!x),children:["Dialect: ",N]}),x&&(0,a.jsxs)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>S("Generic"),children:"Generic"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>S("MySQL"),children:"MySQL"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>S("PostgreSQL"),children:"PostgreSQL"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>S("MariaDB"),children:"MariaDB"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>S("Oracle"),children:"Oracle"})})]})]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-rows-1 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 rounded-md border-2 border-dashed border-gray-800 p-2",children:[(0,a.jsx)("div",{className:"font-extrabold text-xl",children:"Schema"}),(0,a.jsx)("div",{className:"font-bold",children:"Tables Definition"}),(0,a.jsx)("textarea",{id:"schema",rows:5,value:c.toString(),onChange:e=>o(e.target.value),className:"textarea textarea-secondary resize-y w-full textarea-bordered"}),(0,a.jsx)("div",{className:"font-bold",children:"Integrity Constraints"}),(0,a.jsx)("textarea",{id:"constraints",rows:5,value:d.toString(),onChange:e=>u(e.target.value),className:"textarea textarea-secondary resize-y w-full textarea-bordered"})]}),(0,a.jsxs)("div",{className:"space-y-2 rounded-md border-2 border-dashed border-gray-800 p-2",children:[(0,a.jsx)("div",{className:"font-extrabold text-xl",children:"Result"}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)("div",{id:"decision",className:"mt-2 leading-5 font-bold"})}),(0,a.jsx)("div",{id:"counterexample"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 p-2",children:[(0,a.jsx)("div",{className:"text-left pt-2",children:(0,a.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT ROUND((SUM(ORDER_DATE = CUSTOMER_PREF_DELIVERY_DATE) / COUNT(*)) * 100 , 2) AS IMMEDIATE_PERCENTAGE FROM DELIVERY"),s("SELECT ROUND(SUM(IF(ORDER_DATE = CUSTOMER_PREF_DELIVERY_DATE, 1,0 ))/COUNT(DELIVERY_ID) *100,2) AS IMMEDIATE_PERCENTAGE FROM DELIVERY"),i(2),o('{\n    "DELIVERY": {\n        "DELIVERY_ID": "INT",\n        "CUSTOMER_ID": "INT",\n        "ORDER_DATE": "DATE",\n        "CUSTOMER_PREF_DELIVERY_DATE": "DATE"\n    }\n}'),u('[\n    {"primary": [{"value": "DELIVERY.DELIVERY_ID"}]}\n]')})(),children:"Figure 1 Example"})}),(0,a.jsx)("div",{className:"text-left pt-2",children:(0,a.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT DEPTNO, COUNT(*) FILTER (WHERE JOB = 'CLERK') FROM (SELECT * FROM EMP WHERE DEPTNO = 10 UNION ALL SELECT * FROM EMP WHERE DEPTNO > 20) AS t3 GROUP BY DEPTNO"),s("SELECT DEPTNO, COALESCE(SUM(EXPR$1), 0) FROM (SELECT DEPTNO, COUNT(*) FILTER (WHERE JOB = 'CLERK') AS EXPR$1 FROM EMP WHERE DEPTNO = 10 GROUP BY DEPTNO UNION ALL SELECT DEPTNO, COUNT(*) FILTER (WHERE JOB = 'CLERK') AS EXPR$1 FROM EMP WHERE DEPTNO > 20 GROUP BY DEPTNO) AS t12 GROUP BY DEPTNO"),i(2),o('{"EMP": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR", "MGR": "INT",\n                          "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT", "SLACKER": "BOOLEAN"},\n                  "DEPT": {"DEPTNO": "INT", "NAME": "VARCHAR"},\n                  "BONUS": {"ENAME": "VARCHAR", "JOB": "VARCHAR", "SAL": "INT", "COMM": "INT"},\n                  "EMPNULLABLES": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR", "MGR": "INT",\n                                   "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT", "SLACKER": "BOOLEAN"},\n                  "EMPNULLABLES_20": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR",\n                                      "MGR": "INT", "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT",\n                                      "SLACKER": "BOOLEAN"},\n                  "EMP_B": {"EMPNO": "INT", "DEPTNO": "int", "ENAME": "VARCHAR", "JOB": "VARCHAR", "MGR": "INT",\n                            "HIREDATE": "DATE", "SAL": "INT", "COMM": "INT", "SLACKER": "BOOLEAN", "BIRTHDATE": "DATE"}}'),u('[{"primary": [{"value": "EMP.EMPNO"}]},\n                       {"foreign": [{"value": "EMP.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"primary": [{"value": "DEPT.DEPTNO"}]}, {"primary": [{"value": "EMPNULLABLES.EMPNO"}]},\n                       {"foreign": [{"value": "EMPNULLABLES.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"primary": [{"value": "EMPNULLABLES_20.EMPNO"}]},\n                       {"foreign": [{"value": "EMPNULLABLES_20.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"primary": [{"value": "EMP_B.EMPNO"}]},\n                       {"foreign": [{"value": "EMP_B.DEPTNO"}, {"value": "DEPT.DEPTNO"}]},\n                       {"not_null": {"value": "EMP.EMPNO"}}, {"not_null": {"value": "EMP.ENAME"}},\n                       {"not_null": {"value": "EMP.JOB"}}, {"not_null": {"value": "EMP.HIREDATE"}},\n                       {"not_null": {"value": "EMP.SAL"}}, {"not_null": {"value": "EMP.COMM"}},\n                       {"not_null": {"value": "EMP.DEPTNO"}}, {"not_null": {"value": "EMP.SLACKER"}},\n                       {"not_null": {"value": "DEPT.DEPTNO"}}, {"not_null": {"value": "DEPT.NAME"}},\n                       {"not_null": {"value": "BONUS.ENAME"}}, {"not_null": {"value": "BONUS.JOB"}},\n                       {"not_null": {"value": "BONUS.SAL"}}, {"not_null": {"value": "BONUS.COMM"}},\n                       {"not_null": {"value": "EMP_B.EMPNO"}}, {"not_null": {"value": "EMP_B.ENAME"}},\n                       {"not_null": {"value": "EMP_B.JOB"}}, {"not_null": {"value": "EMP_B.HIREDATE"}},\n                       {"not_null": {"value": "EMP_B.SAL"}}, {"not_null": {"value": "EMP_B.COMM"}},\n                       {"not_null": {"value": "EMP_B.DEPTNO"}}, {"not_null": {"value": "EMP_B.SLACKER"}},\n                       {"not_null": {"value": "EMP_B.BIRTHDATE"}}]')})(),children:"Calcite Example"})}),(0,a.jsx)("div",{className:"text-left pt-2",children:(0,a.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT DISTINCT PAGE_ID AS RECOMMENDED_PAGE FROM (SELECT CASE WHEN USER1_ID=1 THEN USER2_ID WHEN USER2_ID=1 THEN USER1_ID ELSE NULL END AS USER_ID FROM FRIENDSHIP) AS TB1 JOIN LIKES AS TB2 ON TB1.USER_ID=TB2.USER_ID WHERE PAGE_ID NOT IN (SELECT PAGE_ID FROM LIKES WHERE USER_ID=1)"),s("SELECT DISTINCT PAGE_ID AS RECOMMENDED_PAGE FROM ( SELECT B.USER_ID, B.PAGE_ID FROM FRIENDSHIP A LEFT JOIN LIKES B ON (A.USER2_ID=B.USER_ID OR A.USER1_ID=B.USER_ID) AND (A.USER1_ID=1 OR A.USER2_ID=1) WHERE B.PAGE_ID NOT IN ( SELECT DISTINCT(PAGE_ID) FROM LIKES WHERE USER_ID=1) ) T"),i(1),o('{"FRIENDSHIP":{"USER1_ID":"INT","USER2_ID":"INT"},"LIKES":{"USER_ID":"INT","PAGE_ID":"INT"}}'),u('[{"primary":[{"value":"FRIENDSHIP.USER1_ID"},{"value":"FRIENDSHIP.USER2_ID"}]},{"primary":[{"value":"LIKES.USER_ID"},{"value":"LIKES.PAGE_ID"}]},{"neq":[{"value":"FRIENDSHIP.USER1_ID"},{"value":"FRIENDSHIP.USER2_ID"}]}]')})(),children:"MySQL Bug"})}),(0,a.jsx)("div",{className:"text-left pt-2",children:(0,a.jsx)("button",{className:"btn w-24",onClick:()=>(function(){let e=document.getElementById("decision"),t=document.getElementById("counterexample");e.innerHTML="",t.innerHTML="",n("SELECT PNUM FROM PARTS WHERE (PNUM, QOH) IN (SELECT P.PNUM, IF(ISNULL(CT), 0, CT) AS QOH FROM (SELECT PNUM FROM SUPPLY GROUP BY PNUM) P LEFT JOIN (SELECT PNUM, COUNT(SHIPDATE) AS CT FROM SUPPLY WHERE SHIPDATE < (DATE '1980-01-01') GROUP BY PNUM) Q ON P.PNUM=Q.PNUM);"),s("WITH TEMP(SUPPNUM, CT) AS (SELECT PNUM, COUNT(SHIPDATE) FROM SUPPLY WHERE SHIPDATE < (DATE '1980-01-01') GROUP BY PNUM) SELECT PNUM FROM PARTS, TEMP WHERE PARTS.QOH = TEMP.CT AND PARTS.PNUM = TEMP.SUPPNUM;"),i(1),o('{"PARTS":{"PNUM":"INT","QOH":"INT"},"SUPPLY":{"PNUM":"INT","QOH":"INT","SHIPDATE":"DATE"}}'),u("")})(),children:"COUNT Bug"})})]})]})})}},622:function(e,n,t){"use strict";var a=t(2265),l=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0};function i(e,n,t){var a,i={},c=null,o=null;for(a in void 0!==t&&(c=""+t),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(o=n.ref),n)r.call(n,a)&&!E.hasOwnProperty(a)&&(i[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===i[a]&&(i[a]=n[a]);return{$$typeof:l,type:e,key:c,ref:o,props:i,_owner:s.current}}n.jsx=i,n.jsxs=i},7437:function(e,n,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=7892)}),_N_E=e.O()}]);